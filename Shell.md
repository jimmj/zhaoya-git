# Shell脚本

## 变量定义

```shell
your_name="runoob.com"
```

- 使用变量：`$your_name`【变量名前加$符号，也可将变量使用花括号包裹】`${your_name}`

- 只读变量：`readonly your_name`【变量名前加readonly 即可】

## 字符串

- 字符串虽然使用双引号和单引号包裹都可以，但是还是用双引号包裹，双引号中可以包含变量

```shell
str="Hello,$your_name"
echo $str
```

- **获取字符串长度**

```shell
string="abcd"
echo ${#string} #输出结果为：4
```

- **截取字符串**

```shell
string="abcd"
# 索引从0开始
echo ${#string:1:3} #输出结果为：bcd
```

> 1. **#**、**##** 表示从左边开始删除。一个 **#** 表示从左边删除到第一个指定的字符；两个 **#** 表示从左边删除到最后一个指定的字符。
>
> 2. **%**、**%%** 表示从右边开始删除。一个 **%** 表示从右边删除到第一个指定的字符；两个 **%** 表示从左边删除到最后一个指定的字符。
>
> ```shell
> 假设有变量 var=http://www.aaa.com/123.htm
> 1. # 号截取，删除左边字符，保留右边字符。
> echo ${var#*//}
> 其中 var 是变量名，# 号是运算符，*// 表示从左边开始删除第一个 // 号及左边的所有字符
> 即删除 http://
> 结果是 ：www.aaa.com/123.htm
> 
> 2. ## 号截取，删除左边字符，保留右边字符。
> echo ${var##*/}
> ##*/ 表示从左边开始删除最后（最右边）一个 / 号及左边的所有字符
> 即删除 http://www.aaa.com/
> 结果是 123.htm
> 
> 3. %号截取，删除右边字符，保留左边字符
> echo ${var%/*}
> %/* 表示从右边开始，删除第一个 / 号及右边的字符
> 结果是：http://www.aaa.com
> 
> 4. %% 号截取，删除右边字符，保留左边字符
> echo ${var%%/*}
> %%/* 表示从右边开始，删除最后（最左边）一个 / 号及右边的字符
> 结果是：http:
> 
> 5. 从左边第几个字符开始，及字符的个数
> echo ${var:0:5}
> 其中的 0 表示左边第一个字符开始，5 表示字符的总个数。
> 结果是：http:
> 
> 6. 从左边第几个字符开始，一直到结束。
> echo ${var:7}
> 其中的 7 表示左边第8个字符开始，一直到结束。
> 结果是 ：www.aaa.com/123.htm
> 
> 7. 从右边第几个字符开始，及字符的个数
> echo ${var:0-7:3}
> 其中的 0-7 表示右边算起第七个字符开始，3 表示字符的个数。
> 结果是：123
> 
> 8. 从右边第几个字符开始，一直到结束。
> echo ${var:0-7}
> 表示从右边第七个字符开始，一直到结束。
> 结果是：123.htm
> ```

- **查找子字符串**

```shell
# 查找字符 i 或 o 的位置(哪个字母先出现就计算哪个)
string="runoob is a great site"
echo `expr index "$string" io`  # 输出 4
# 使用的是反引号，不是单引号
```

## shell 数组

> bash支持一维数组，且不限定数组大小

- 定义数组

**在 Shell 中，用括号来表示数组，数组元素用"空格"符号分割开**

`array_name=(value0 value1 value2 value3)`

或

```shell
array_name[0]=value0
array_name[1]=value1
array_name[n]=valuen
```

- 获取数组元素

```shell
value=${array_name[1]}
# 使用@可获取全部元素
value=${array_name[@]}
```

- 获取数组长度

```shell
# 取得数组元素的个数
length=${#array_name[@]}
# 或者
length=${#array_name[*]}
# 取得数组单个元素的长度
lengthn=${#array_name[n]}
```

## Shell参数传递

- **向脚本传递参数，脚本内获取参数的格式为：`$n`。`n` 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推……**

| 参数处理 | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| $#       | 传递到脚本的参数个数                                         |
| $*       | 以一个单字符串显示所有向脚本传递的参数。<br>如"$*"用「"」括起来的情况、以"$1 $2 … $n"的形式输出所有参数。 |
| $$       | 脚本运行的当前进程ID号                                       |
| $!       | 后台运行的最后一个进程的ID号                                 |
| $@       | 与$*相同，但是使用时加引号，并在引号中返回每个参数。<br>如"$@"用「"」括起来的情况、以"$1" "$2" … "$n" 的形式输出所有参数 |
| $-       | 显示Shell使用的当前选项，与[set命令](https://www.runoob.com/linux/linux-comm-set.html)功能相同 |
| $?       | 显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误  |

> **如果包含空格，应该使用单引号或者双引号将该参数括起来，以便于脚本将这个参数作为整体来接收**

- **<>Shell脚本中中括号的用法[链接]</h>>(https://www.runoob.com/w3cnote/shell-summary-brackets.html)**

## Shell运算符

